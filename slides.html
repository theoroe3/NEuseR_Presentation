<!DOCTYPE html>
<html>
  <head>
    <title>The Trouble with Tibbles</title>
    <meta charset="utf-8">
    <meta name="author" content="Colin Gillespie (@csgillespie)" />
    <link href="libs/remark-css/example.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# The Trouble with Tibbles
## Theo Roe
### Colin Gillespie (<a href="https://twitter.com/csgillespie">@csgillespie</a>)

---





layout: true

      &lt;div class="jr-header"&gt;
        &lt;img class="logo" src="assets/white_logo_full.png"/&gt;
        &lt;span class="social"&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;img src="assets/twitter.gif"/&gt;&lt;/td&gt;&lt;td&gt; @jumping_uk&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/span&gt;
      &lt;/div&gt;
      
&lt;div class="jr-footer"&gt;&lt;span&gt;&amp;copy; 2017 Jumping Rivers (jumpingrivers.com)&lt;/span&gt;&lt;/div&gt;
---

# What are tibbles ?  

--

Tibbles are a unifying feature of the tidyverse  

--


```r
install.packages("tidyverse")
library("tidyverse")
```
or

```r
install.packages("tibbles")
library("tibbles")
```

--

-  Tibbles are a modern take on data frames  
      
--

 _"Keeping what time has proven to be effective, and throwing out what is not"_

  &lt;!-- r is an old language, changing base code would ultimately lead to many problems --&gt;
--

- Tibbles force you to confront problems earlier, typically leading to cleaner, more expressive code  
  
  &lt;!-- Chat more about this later --&gt;
  
  
---
background-image: url(assets/tibbles.jpg)

# the trouble with tibbles...
---
layout: true

      &lt;div class="jr-header"&gt;
        &lt;img class="logo" src="assets/white_logo_full.png"/&gt;
        &lt;span class="social"&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;img src="assets/twitter.gif"/&gt;&lt;/td&gt;&lt;td&gt; @jumping_uk&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/span&gt;
      &lt;/div&gt;
      
&lt;div class="jr-footer"&gt;&lt;span&gt;&amp;copy; 2017 Jumping Rivers (jumpingrivers.com)&lt;/span&gt;&lt;/div&gt;
 
---

# You're a tribblemaker

&lt;!-- Tibbles can be formed in three ways: --&gt;
--

###  1) _Creation_

--

.pull-left[

```r
tibble(a = 1:26,
              b = letters)  
#&gt; # A tibble: 26 x 2
#&gt;       a     b
#&gt;   &lt;int&gt; &lt;chr&gt;
#&gt; 1     1     a
#&gt; 2     2     b
#&gt; 3     3     c
#&gt; 4     4     d
#&gt; # ... with 22 more rows
```
]
--
.pull-right[

```r
data_frame(a = 1:26,
              b = letters)  
#&gt; # A tibble: 26 x 2
#&gt;       a     b
#&gt;   &lt;int&gt; &lt;chr&gt;
#&gt; 1     1     a
#&gt; 2     2     b
#&gt; 3     3     c
#&gt; 4     4     d
#&gt; # ... with 22 more rows
```
]

---

# You're a tribblemaker

 &lt;!-- short for transposed tribble --&gt;

`tribble()` is a way of laying out small amounts of data in easy to read form

.pull-left[

```r
tribble(
  ~a, ~`+`, ~c,
  #--|----|----
  "T",   1, 3.6,
  "h",   2, 8.5,
  "e",   3, 8.5,
  "0",   4, 8.5)
```
]
.pull-right[

```
#&gt; # A tibble: 4 x 3
#&gt;       a   `+`     c
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1     T     1   3.6
#&gt; 2     h     2   8.5
#&gt; 3     e     3   8.5
#&gt; 4     0     4   8.5
```
]

&lt;!-- column headers are layed out as formulas i.e ~x --&gt;
---

# You're a tribblemaker

--

### 2) _Coercion_

--


```r
df = data.frame(a = 1:26, b = letters)
```

--

.pull-left[

```r
as_tibble(df)
#&gt; # A tibble: 26 x 2
#&gt;       a      b
#&gt;   &lt;int&gt; &lt;fctr&gt;
#&gt; 1     1      a
#&gt; 2     2      b
#&gt; 3     3      c
#&gt; 4     4      d
#&gt; # ... with 22 more rows
```
]

--

.pull-right[

```r
as_data_frame(df)
#&gt; # A tibble: 26 x 2
#&gt;       a      b
#&gt;   &lt;int&gt; &lt;fctr&gt;
#&gt; 1     1      a
#&gt; 2     2      b
#&gt; 3     3      c
#&gt; 4     4      d
#&gt; # ... with 22 more rows
```
]

--

&lt;!-- lists, vectors, single instances of class --&gt;

---

# You're a tribblemaker

--

### 3) _Importing_ 

--
&lt;!-- START TO SEE DIFFERENCES --&gt;

```r
library("readr")
```

--

To read in commas seperated files:

```r
read_csv
```

--

To read in semi-colon seperated files:

```r
read_csv2
```

--

To read in tab seperated files:

```r
read_tsv
```

&lt;/center&gt;
---

# You're a tribblemaker

--

.pull-left[

```r
df = read_csv("x.csv")
#&gt; Parsed with column specification:
#&gt; cols(
#&gt;   `&lt;-` = col_integer(),
#&gt;   `8` = col_integer(),
#&gt;   `TRUE` = col_double(),
#&gt;   name = col_character()
#&gt; )
```
]

--

.pull-right[

```r
df
#&gt; # A tibble: 4 x 4
#&gt;    `&lt;-`   `8` `TRUE`  name
#&gt;   &lt;int&gt; &lt;int&gt;  &lt;dbl&gt; &lt;chr&gt;
#&gt; 1     1     2   0.25     t
#&gt; 2     2     4   0.25     h
#&gt; 3     3     6   0.25     e
#&gt; 4     4     8   0.25     o
```
]

--

These _are_ all faster than `read.csv`, and are general versions of `read_delim`.

&lt;!-- tell them to look up read.csv vs read_csv --&gt;

---

layout: true

      &lt;div class="jr-header"&gt;
        &lt;img class="logo" src="assets/white_logo_full.png"/&gt;
        &lt;span class="social"&gt;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&lt;img src="assets/twitter.gif"/&gt;&lt;/td&gt;&lt;td&gt; @jumping_uk&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/span&gt;
      &lt;/div&gt;
      
&lt;div class="jr-footer"&gt;&lt;span&gt;&amp;copy; 2017 Jumping Rivers (jumpingrivers.com)&lt;/span&gt;&lt;/div&gt;

---

&lt;!--
# tibbles vs. data frames

It's possible for a tibble to have column names that are not valid R variable names, aka non-syntactic names
.pull-left[

```r
tibble(
  `-&gt;` = "arrow", 
  ` ` = "space",
  `7` = "number"
)
#&gt; # A tibble: 1 x 3
#&gt;    `-&gt;`   ` `    `7`
#&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;
#&gt; 1 arrow space number
```
]

.pull-right[

```r
 data.frame(
   `-&gt;` = "colon", 
   ` ` = "space",
   `7` = "number"
 )
#&gt;     X..    X.     X7
#&gt; 1 colon space number
```
 ]

--- --&gt;



# tibbles vs. data frames

--

A refined print process means a tibble will only show the first 10 rows and as many columns can fit on your screen:
 
--
 
.pull-left[

```r
 tibble(a = 1:26,
               b = letters)
#&gt; # A tibble: 26 x 2
#&gt;       a     b
#&gt;   &lt;int&gt; &lt;chr&gt;
#&gt; 1     1     a
#&gt; 2     2     b
#&gt; 3     3     c
#&gt; 4     4     d
#&gt; 5     5     e
#&gt; # ... with 21 more rows
```
]

--

.pull-right[

```r
head(data.frame(a = 1:26,
              b = letters))
#&gt;   a b
#&gt; 1 1 a
#&gt; 2 2 b
#&gt; 3 3 c
#&gt; 4 4 d
#&gt; 5 5 e
#&gt; 6 6 f
```
]

--

Notice the column types are displayed above the column and the dimensions are shown at the top.

---

# tibbles vs. data frames

--

The preset row options be changed using

```r
 options(tibble.print_max = 3, tibble.print_min = 1)
```

--

Now if there is more than 3 rows, print only 1 rows
 &lt;!--  default is 20, 10--&gt;
 
--
 
.pull-left[

```r
tibble(1:3)
#&gt; # A tibble: 3 x 1
#&gt;   `1:3`
#&gt;   &lt;int&gt;
#&gt; 1     1
#&gt; 2     2
#&gt; 3     3
```
]

--

.pull-right[

```r
tibble(1:4)
#&gt; # A tibble: 4 x 1
#&gt;   `1:4`
#&gt;   &lt;int&gt;
#&gt; 1     1
#&gt; # ... with 3 more rows
```
]

--

More options are available, find them by using `package?tibble`

---

# tibbles vs. data frames: subsetting

--

Tibbles don't:

--

- ignore non-syntactic symbols as column headers when importing data

--

- drop the variable type

--

- partial match

--

- no more strings as factors!

--

&lt;!-- .pull-left[

```r
tib = tibble(aa = 1:4,
         bb = letters[1:4])
tib[[2]]
#&gt; [1] "a" "b" "c" "d"
tib$a
#&gt; Warning: Unknown or uninitialised column: 'a'.
#&gt; NULL
tib$aa
#&gt; [1] 1 2 3 4
tib[["bb"]]
#&gt; [1] "a" "b" "c" "d"
class(tib[[2]])
#&gt; [1] "character"
```
]
.pull-right[

```r
df = data.frame(aa = 1:4,
            bb = letters[1:4])
df[[2]]
#&gt; [1] a b c d
#&gt; Levels: a b c d
df$a
#&gt; [1] 1 2 3 4
class(df[[2]])
#&gt; [1] "factor"
```
 ] 
 --&gt;

---
layout: true

---
background-image: url(assets/tribbles.jpg)
background-size: cover

class: center, middle, inverse

Thank you for listening! 

Any questions?
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {window.dispatchEvent(new Event('resize'));});
(function() {var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler"); if (!r) return; s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }"; d.head.appendChild(s);})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
